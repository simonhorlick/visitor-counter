<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>visitor-counter</title>
  </head>

  <body>

  <p>There have been <span id="views"></span> visitors!!!</p>

  <script>

    var views = document.getElementById("views");

    function print(message) {
      views.innerHTML = message;
    }

    function makeConnection() {
      var websocket = new WebSocket("ws://localhost:9160/index.html");
      websocket.onopen = function(evt) { print("open"); };
      websocket.onclose = function(evt) { print("close"); };
      websocket.onmessage = function(evt) { print(evt.data); };
      websocket.onerror = function(evt) { print("error"); };
      //setTimeout(makeConnection, 10);
    }

    makeConnection();
  </script>
  </body>

</html>
